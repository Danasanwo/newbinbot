function d(...t){if(t.length>0){let e=t[0].length;for(let r=1;r<t.length;r++)if(t[r].length!==e)throw new Error(`values length at ${r} not ${e}`)}}function B(t){return t.map(e=>Math.abs(e))}function g(t,e){d(t,e);let r=new Array(t.length);for(let n=0;n<r.length;n++)r[n]=t[n]+e[n];return r}function O(t,e){let r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]+t;return r}function s(t,e){d(t,e);let r=new Array(t.length);for(let n=0;n<r.length;n++)r[n]=t[n]/e[n];return r}function L(t,e){let r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]/t;return r}function x(t,e){d(t,e);let r=new Array(t.length);for(let n=0;n<r.length;n++)r[n]=t[n]*e[n];return r}function l(t,e){let r=new Array(e.length);for(let n=0;n<r.length;n++)r[n]=e[n]*t;return r}function i(t,e){d(t,e);let r=new Array(t.length);for(let n=0;n<r.length;n++)r[n]=t[n]-e[n];return r}function Xt(t,e){let r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]-t;return r}function I(t,e,r){let n=new Array(r.length);for(let o=0;o<n.length;o++)o<t?n[o]=e:n[o]=r[o-t];return n}function D(t,e){return I(t,0,e)}function M(t,e){return i(e,D(t,e))}function ee(t){return t.map(e=>e>=0?1:-1)}function at(...t){d(...t);let e=new Array(t[0].length);for(let r=0;r<e.length;r++){e[r]=new Array(t.length);for(let n=0;n<e[r].length;n++)e[r][n]=t[n][r]}return e}function k(...t){return at(...t).map(e=>Math.max(...e))}function H(t,e){let r=Math.pow(10,t);return Math.round(e*r)/r}function Kt(t,e){return e.map(r=>H(t,r))}function N(t,e,r){let n=new Array((e-t)/r);for(let o=0;o<n.length;o++)n[o]=t+r*o;return n}function te(t,e){return t.map(r=>Math.pow(r,e))}function re(t){return t.map(e=>Math.sqrt(e))}var h=(n=>(n[n.SELL=-1]="SELL",n[n.HOLD=0]="HOLD",n[n.BUY=1]="BUY",n))(h||{});function Jt(t){return t.map(e=>e===1?-1:e===-1?1:0)}function ne(t,e){d(t,e);let r=new Array(t.length),n=1,o=n,m=0;for(let a=0;a<r.length;a++)e[a]===1?o>0&&(m=o/t[a],o=0):e[a]===-1&&m>0&&(o=m*t[a],m=0),r[a]=(m*t[a]+o-n)/n;return r}function er(t,e){let r=new Array(e.length);for(let n=0;n<r.length;n++){let o=e[n].strategy(t),m=ne(t.closings,o);r[n]={info:e[n],gain:m[m.length-1],lastAction:o[o.length-1]}}return r.sort((n,o)=>o.gain-n.gain),r}var st=(m=>(m[m.SYMBOL=0]="SYMBOL",m[m.NAME=1]="NAME",m[m.STRATEGY=2]="STRATEGY",m[m.GAIN=3]="GAIN",m[m.ACTION=4]="ACTION",m))(st||{});function rr(t,e,r){let n=[];switch(e){case 0:n=t.sort((o,m)=>o.companyInfo.symbol.localeCompare(m.companyInfo.symbol));break;case 1:n=t.sort((o,m)=>o.companyInfo.name.localeCompare(m.companyInfo.name));break;case 2:n=t.sort((o,m)=>o.strategyResults[0].info.name.localeCompare(m.strategyResults[0].info.name));break;case 3:n=t.sort((o,m)=>o.strategyResults[0].gain-m.strategyResults[0].gain);break;case 4:n=t.sort((o,m)=>o.strategyResults[0].lastAction-m.strategyResults[0].lastAction);break}return r||(n=n.reverse()),n}function oe(t){return Array(t.closings.length).fill(1)}function b(t,e){let r=new Array(e.length),n=0;for(let o=0;o<e.length;o++)n+=e[o],o>=t?(n-=e[o-t],r[o]=n/t):r[o]=n/(o+1);return r}function me(t,e){let r=L(2,g(e,t)),n=b(5,r),o=b(34,r);return i(n,o)}function ie(t){return me(t.highs,t.lows).map(r=>r>0?1:r<0?-1:0)}var P=class t{constructor(){this.root=null}insert(e){let r={value:e,left:null,right:null};if(this.root===null){this.root=r;return}let n=this.root,o=!1;for(;!o;)r.value<=n.value?n.left===null?(n.left=r,o=!0):n=n.left:n.right===null?(n.right=r,o=!0):n=n.right}remove(e){let r={node:this.root,parent:null};for(;r.node!==null;){if(e===r.node.value)return this.removeNode(r),!0;r.parent=r.node,e<r.node.value?r.node=r.node.left:r.node=r.node.right}return!1}min(){let e=t.minNode(this.root);if(e.node===null)throw new Error("Tree empty");return e.node.value}max(){let e=t.maxNode(this.root);if(e.node===null)throw new Error("Tree empty");return e.node?.value}removeNode(e){if(e.node!==null)if(e.node.left!==null&&e.node.right!==null){let r=t.minNode(e.node.right);r.parent===null&&(r.parent=e.node),this.removeNode(r),r.node!==null&&(e.node.value=r.node.value)}else{let r=null;e.node.left!==null?r=e.node.left:r=e.node.right,e.parent===null?this.root=r:e.parent.left===e.node?e.parent.left=r:e.parent.right=r}}static minNode(e){let r={node:null,parent:null};if(e!==null)for(r.node=e;r.node.left!==null;)r.parent=r.node,r.node=r.node.left;return r}static maxNode(e){let r={node:null,parent:null};if(e!==null)for(r.node=e;r.node.right!==null;)r.parent=r.node,r.node=r.node.right;return r}};function y(t,e){let r=new Array(e.length),n=new P;for(let o=0;o<e.length;o++)n.insert(e[o]),o>=t&&n.remove(e[o-t]),r[o]=n.max();return r}function S(t,e){let r=new Array(e.length),n=new P;for(let o=0;o<e.length;o++)n.insert(e[o]),o>=t&&n.remove(e[o-t]),r[o]=n.min();return r}function ue(t,e,r){d(t,e,r);let n=L(2,g(y(9,t),S(9,e))),o=L(2,g(y(26,t),S(26,e))),m=L(2,g(n,o)),a=L(2,g(y(52,t),S(52,e))),u=D(26,r);return{conversionLine:n,baseLine:o,leadingSpanA:m,leadingSpanB:a,laggingSpan:u}}function ae(t){let e=ue(t.highs,t.lows,t.closings),r=new Array(e.baseLine.length);for(let n=0;n<r.length;n++)e.leadingSpanA[n]>e.leadingSpanB[n]?r[n]=1:e.leadingSpanA[n]<e.leadingSpanB[n]?r[n]=-1:r[n]=0;return r}function _(t,e){let r=new Array(e.length),n=0;for(let o=0;o<e.length;o++){let m=o+1;o<t?n+=e[o]:(n=r[o-1]*(t-1)+e[o],m=t),r[o]=n/m}return r}function Y(t,e){let r=new Array(e.length),n=new Array(e.length);r[0]=n[0]=0;for(let p=1;p<e.length;p++){let c=e[p]-e[p-1];c>0?(r[p]=c,n[p]=0):(n[p]=-c,r[p]=0)}let o=_(t,r),m=_(t,n),a=new Array(e.length),u=new Array(e.length);a[0]=u[0]=0;for(let p=1;p<e.length;p++)u[p]=o[p]/m[p],a[p]=100-100/(1+u[p]);return a}function Er(t){return Y(14,t)}function se(t){return Y(2,t)}function ce(t){let e=se(t.closings),r=new Array(e.length);for(let n=0;n<r.length;n++)e[n]<10?r[n]=1:e[n]>90?r[n]=-1:r[n]=0;return r}function le(t,e,r){let n=y(14,t),o=S(14,e),m=l(100,s(i(r,o),i(n,o))),a=b(3,m);return{k:m,d:a}}function fe(t){let e=le(t.highs,t.lows,t.closings),r=new Array(e.k.length);for(let n=0;n<r.length;n++)e.k[n]>=80&&e.d[n]>=80?r[n]=-1:e.k[n]<=20&&e.d[n]<=20?r[n]=1:r[n]=0;return r}var pe=14;function be(t,e,r){let n=y(pe,t),o=S(pe,e);return l(-100,s(i(n,r),i(n,o)))}function ge(t){return be(t.highs,t.lows,t.closings).map(r=>r<=-80?1:r>=-20?-1:0)}function f(t,e){let r=new Array(e.length);if(r.length>0){let n=2/(1+t),o=1-n;r[0]=e[0];for(let m=1;m<r.length;m++)r[m]=e[m]*n+r[m-1]*o}return r}function W(t,e,r){let n=f(t,r),o=f(e,r);return i(n,o)}function de(t){return W(14,30,t)}function he(t){let e=new Array(t.length);for(let r=0;r<e.length;r++)t[r]>0?e[r]=1:t[r]<0?e[r]=-1:e[r]=0;return e}function tn(t,e,r){return he(W(t,e,r.closings))}function xe(t){return he(de(t.closings))}function j(t){let e=new Array(t.length);if(t.length>0){let r=null,n=0;for(let o=0;o<t.length;o++)r!==t[o]?(r=t[o],n=0):n++,e[o]=n}return e}var C=25;function ye(t,e){d(t,e);let r=j(y(C,t)),n=j(S(C,e)),o=l(100,L(C,O(C,l(-1,r)))),m=l(100,L(C,O(C,l(-1,n))));return{up:o,down:m}}function Ae(t){let e=ye(t.highs,t.lows),r=new Array(e.up.length);for(let n=0;n<r.length;n++)e.up[n]>e.down[n]?r[n]=1:e.down[n]>e.up[n]?r[n]=-1:r[n]=0;return r}function Se(t,e,r,n){return s(i(n,t),i(e,r))}function Le(t){return Se(t.openings,t.highs,t.lows,t.closings).map(r=>r>0?1:r<0?-1:0)}function ct(t,e){d(t,e);let r=0,n=0,o=0,m=0;for(let c=0;c<t.length;c++)r+=t[c],n+=t[c]*t[c],o+=e[c],m+=t[c]*e[c];let a=t.length,u=(a*m-r*o)/(a*n-r*r),p=(o-u*r)/a;return{m:u,b:p}}function U(t,e,r){d(e,r);let n=new Array(e.length),o=new Array(e.length),m=0,a=0,u=0,p=0;for(let c=0;c<e.length;c++){m+=e[c],a+=e[c]*e[c],u+=r[c],p+=e[c]*r[c];let w=c+1;c>=t&&(m-=e[c-t],a-=e[c-t]*e[c-t],u-=r[c-t],p-=e[c-t]*r[c-t],w=t),c>0?(n[c]=(w*p-m*u)/(w*a-m*m),o[c]=(u-n[c]*m)/w):(n[c]=0,o[c]=0)}return{m:n,b:o}}function we(t,e){let r=ct(t,e);return O(r.b,l(r.m,t))}function Oe(t,e,r){let n=U(t,e,r);return g(x(n.m,e),n.b)}function Be(t){let e=N(0,t.length,1),r=we(e,t);return l(100,s(i(t,r),t))}function Ln(t,e){let r=N(0,e.length,1),n=Oe(t,r,e);return l(100,s(i(e,n),e))}function ve(t){return Be(t.closings).map(r=>r>0?1:r<0?-1:0)}function lt(t,e,r,n,o,m){let a=y(t,n),u=S(t,o),p=l(100,s(i(m,u),i(a,u))),c=b(e,p),w=b(r,c),R=i(l(3,c),l(2,w));return{k:c,d:w,j:R}}function Ee(t,e,r){return lt(9,3,3,t,e,r)}function Re(t){let e=Ee(t.highs,t.lows,t.closings),r=new Array(e.k.length);for(let n=0;n<r.length;n++)e.k[n]>e.d[n]&&e.k[n]<=20?r[n]=1:e.k[n]<e.d[n]&&e.k[n]>=80?r[n]=-1:r[n]=0;return r}function Ie(t){let e=f(12,t),r=f(26,t),n=i(e,r),o=f(9,n);return{macdLine:n,signalLine:o}}function De(t){let e=Ie(t.closings),r=new Array(e.macdLine.length);for(let n=0;n<r.length;n++)e.macdLine[n]>e.signalLine[n]?r[n]=1:e.macdLine[n]<e.signalLine[n]?r[n]=-1:r[n]=0;return r}var q=(n=>(n[n.FALLING=-1]="FALLING",n[n.STABLE=0]="STABLE",n[n.RISING=1]="RISING",n))(q||{});var X=.02,ft=.2;function Fe(t,e,r){d(t,e,r);let n=new Array(t.length),o=new Array(t.length);n[0]=-1,o[0]=t[0];let m=X,a=e[0];for(let u=1;u<o.length;u++){o[u]=o[u-1]-(o[u-1]-a)*m,n[u-1]===-1?(o[u]=Math.max(o[u],t[u-1]),u>1&&(o[u]=Math.max(o[u],t[u-2])),t[u]>=o[u]&&(o[u]=a)):(o[u]=Math.min(o[u],e[u-1]),u>1&&(o[u]=Math.min(o[u],e[u-2])),e[u]<=o[u]&&(o[u]=a));let p=a;o[u]>r[u]?(n[u]=-1,a=Math.min(a,e[u])):(n[u]=1,a=Math.max(a,t[u])),n[u]!==n[u-1]?m=X:p!==a&&m<ft&&(m+=X)}return{trends:n,psar:o}}function Me(t){return Fe(t.highs,t.lows,t.closings).trends.map(r=>{switch(r){case-1:return-1;case 1:return 1;case 0:return 0}})}function T(t,e,r){return L(3,g(g(t,e),r))}function Pe(t){let e=T(t.highs,t.lows,t.closings),r=new Array(e.length);r[0]=0;for(let n=1;n<r.length;n++)e[n]>e[n-1]?r[n]=1:e[n]<e[n-1]?r[n]=-1:r[n]=0;return r}function A(t,e){let r=new Array(e.length),n=0;for(let o=0;o<e.length;o++)n+=e[o],o>=t&&(n-=e[o-t]),r[o]=n;return r}var K=14;function Ce(t,e,r){d(t,e,r);let n=D(1,r),o=B(i(t,D(1,e))),m=B(i(e,D(1,t))),a=A(K,o),u=A(K,m),p=k(i(t,e),B(i(t,n)),B(i(e,n))),c=A(K,p),w=s(a,c),R=s(u,c);return{plusVi:w,minusVi:R}}function Te(t){let e=Ce(t.highs,t.lows,t.closings),r=new Array(e.plusVi.length);for(let n=0;n<r.length;n++)e.plusVi[n]>e.minusVi[n]?r[n]=1:e.plusVi[n]<e.minusVi[n]?r[n]=-1:r[n]=0;return r}function Ne(t,e,r){d(t,e,r);let n=s(i(t,e),g(t,e)),o=b(20,x(t,O(1,l(4,n)))),m=b(20,r),a=b(20,x(e,O(1,l(-4,n))));return{upperBand:o,middleBand:m,lowerBand:a}}function ke(t){let e=Ne(t.highs,t.lows,t.closings),r=new Array(e.upperBand.length);for(let n=0;n<r.length;n++)t.closings[n]>=e.upperBand[n]?r[n]=1:r[n]=-1;return r}function Ue(t,e){let r=new Array(e.length),n=b(t,e);for(let o=0;o<e.length;o++)if(r[o]=0,o>=t-1){let m=0;for(let a=o-(t-1);a<=o;a++)m+=(e[a]-n[o])*(e[a]-n[o]);r[o]=Math.sqrt(m/t)}return r}var Ve=20;function Ge(t){let e=l(2,Ue(Ve,t)),r=b(Ve,t),n=g(r,e),o=i(r,e);return{upperBand:n,middleBand:r,lowerBand:o}}function He(t){let e=Ge(t.closings),r=new Array(e.upperBand.length);for(let n=0;n<r.length;n++)t.closings[n]>e.upperBand[n]?r[n]=-1:t.closings[n]<e.lowerBand[n]?r[n]=1:r[n]=0;return r}function pt(t,e,r,n,o){let m=N(0,o.length,1),a=U(t,m,r),u=U(t,m,n),p=g(r,x(a.m,m)),c=g(n,x(u.m,m)),w=y(t,p),R=S(t,c),E=s(l(100,i(o,R)),i(w,R)),ut=f(e,E);return{po:E,spo:ut}}function _e(t,e,r){return pt(14,3,t,e,r)}function Ye(t){let e=_e(t.highs,t.lows,t.closings),r=new Array(e.po.length);for(let n=0;n<r.length;n++)e.po[n]>e.spo[n]?r[n]=1:e.po[n]<e.spo[n]?r[n]=-1:r[n]=0;return r}var We=20;function je(t,e,r,n){let o=s(i(i(r,e),i(t,r)),i(t,e)),m=x(o,n);return s(A(We,m),A(We,n))}function qe(t){return je(t.highs,t.lows,t.closings,t.volumes).map(r=>r<0?1:r>0?-1:0)}var bt=14;function gt(t,e,r,n){let o=M(1,L(2,g(e,r))),m=s(L(1e8,n),i(e,r));return b(t,s(o,m))}function Xe(t,e,r){return gt(bt,t,e,r)}function Ke(t){return Xe(t.highs,t.lows,t.volumes).map(r=>r>0?1:r<0?-1:0)}function dt(t,e,r){return f(t,x(M(1,e),r))}function $e(t,e){return dt(13,t,e)}function ze(t){return $e(t.closings,t.volumes).map(r=>r>0?1:r<0?-1:0)}function ht(t,e,r,n,o){let m=x(T(e,r,n),o),a=ee(M(1,m)),u=x(a,m),p=u.map(E=>E>=0?E:0),c=u.map(E=>E<0?E:0),w=s(A(t,p),A(t,l(-1,c)));return O(100,l(-100,te(O(1,w),-1)))}function Je(t,e,r,n){return ht(14,t,e,r,n)}function Qe(t){return Je(t.highs,t.lows,t.closings,t.volumes).map(r=>r>=80?-1:1)}var xt=1e3,Ze=255;function et(t,e){d(t,e);let r=new Array(t.length);for(let n=0;n<r.length;n++)n===0?r[n]=xt:e[n-1]<e[n]?r[n]=r[n-1]:r[n]=r[n-1]+(t[n]-t[n-1])/t[n-1]*r[n-1];return r}function tt(t){let e=et(t.closings,t.volumes),r=f(Ze,e),n=new Array(e.length);for(let o=0;o<n.length;o++)e[o]<r[o]?n[o]=1:e[o]>r[o]?n[o]=-1:n[o]=0;return n}var yt=14;function At(t,e,r){return s(A(t,x(e,r)),A(t,r))}function rt(t,e){return At(yt,t,e)}function nt(t){let e=rt(t.closings,t.volumes);return i(e,t.closings).map(n=>n>0?1:n<0?-1:0)}var Gm=[{name:"Buy Hold",strategy:oe},{name:"Awesome Oscillator",strategy:ie},{name:"RSI 2",strategy:ce},{name:"Ichimoku Cloud",strategy:ae},{name:"Stochastic Oscillator",strategy:fe},{name:"Williams R",strategy:ge},{name:"Absolute Price Oscillator (APO)",strategy:xe},{name:"Aroon Strategy",strategy:Ae},{name:"Balance of Power (BOM)",strategy:Le},{name:"Chande Forecast Oscillator (CFO)",strategy:ve},{name:"KDJ Strategy",strategy:Re},{name:"MACD Strategy",strategy:De},{name:"Parabolic SAR",strategy:Me},{name:"Typical Price",strategy:Pe},{name:"Vortex Strategy",strategy:Te},{name:"Acceleration Bands",strategy:ke},{name:"Bollinger Bands",strategy:He},{name:"Projection Oscillator",strategy:Ye},{name:"Chaikin Money Flow (CMF)",strategy:qe},{name:"Ease of Movement (EMV)",strategy:Ke},{name:"Force Index",strategy:ze},{name:"Money Flow Index",strategy:Qe},{name:"Negative Volume Index (NVI)",strategy:tt},{name:"Volume Weighted Average Price",strategy:nt}];function St(t){return{strategyInfo:t.info,score:1,minGain:t.gain,maxGain:t.gain,averageGain:t.gain}}function Lt(t,e){t.score++,t.minGain=Math.min(t.minGain,e.gain),t.maxGain=Math.max(t.maxGain,e.gain),t.averageGain=(t.averageGain+e.gain)/2}function _m(t){let e=new Map;for(let n of t){let o=n.strategyResults[0],m=e.get(o.info.name);m!==void 0?Lt(m,o):e.set(o.info.name,St(o))}let r=Array.from(e.values());return r.sort((n,o)=>o.score-n.score),r}var wt=(m=>(m[m.STRATEGY=0]="STRATEGY",m[m.SCORE=1]="SCORE",m[m.MIN=2]="MIN",m[m.MAX=3]="MAX",m[m.AVERAGE=4]="AVERAGE",m))(wt||{});function Ym(t,e,r){let n=[];switch(e){case 0:n=t.sort((o,m)=>o.strategyInfo.name.localeCompare(m.strategyInfo.name));break;case 1:n=t.sort((o,m)=>o.score-m.score);break;case 2:n=t.sort((o,m)=>o.minGain-m.minGain);break;case 3:n=t.sort((o,m)=>o.maxGain-m.maxGain);break;case 4:n=t.sort((o,m)=>o.averageGain-m.averageGain);break}return r||(n=n.reverse()),n}var v=class t{constructor(e,r){this.min=e,this.max=r}getMin(){return this.min}getMax(){return this.max}span(){return this.max-this.min}static merge(e){return e.reduce((r,n)=>new t(Math.min(r.min,n.min),Math.max(r.max,n.max)))}static from(e){return new t(Math.min(...e),Math.max(...e))}};var F=class{constructor(e,r){this.fromDelta=e.getMin(),this.toDelta=r.getMin(),this.multiplier=r.span()/e.span()}scale(e){return(e-this.fromDelta)*this.multiplier+this.toDelta}descale(e){return(e-this.toDelta)/this.multiplier+this.fromDelta}};var Ot="black",Bt=1,vt="red",Et=1,Rt=30,$=4,It="14px Arial",z=-1,V=new v(0,1),ot=class{constructor(e){let r=document.getElementById(e);if(r===null)throw new Error("Canvas element not found");if(!(r instanceof HTMLCanvasElement))throw new Error("Not a canvas element");this.canvas=r;let n=this.canvas.getContext("2d");if(n===null)throw new Error("Canvas context is null");this.context=n,this.dataSets=new Map,this.dateSetsChanged=!1,this.xScaler=new F(V,V),this.yScaler=new F(V,V),this.xFocus=z,this.canvas.addEventListener("mousemove",o=>this.onMouseMove(o)),this.canvas.addEventListener("mouseout",()=>this.onMouseOut())}add(e){this.dataSets.set(e.legend,e),this.dateSetsChanged=!0}remove(e){let r=this.dataSets.delete(e);return r&&(this.dateSetsChanged=!0),r}draw(){this.dateSetsChanged&&(this.updateScalers(),this.dateSetsChanged=!1),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawDataSets(),this.drawFocus()}drawDataSets(){let e=this.chartHeight();for(let r of this.dataSets.values()){this.context.lineWidth=r.width??Bt;let n=0,o=0;for(let m=0;m<r.values.length;m++){let a=this.xScaler.scale(m),u=e-this.yScaler.scale(r.values[m]);m>0&&(this.context.strokeStyle=this.styleAtIndex(r,m),this.context.beginPath(),this.context.moveTo(n,o),this.context.lineTo(a,u),this.context.stroke()),n=a,o=u}}}styleAtIndex(e,r){return e.style===void 0?Ot:Array.isArray(e.style)?e.style[r]:e.style}drawFocus(){this.xFocus!==z&&(this.drawFocusLine(),this.drawFocusedValues())}drawFocusLine(){this.context.strokeStyle=vt,this.context.lineWidth=Et,this.context.beginPath(),this.context.moveTo(this.xFocus,0),this.context.lineTo(this.xFocus,this.chartHeight()),this.context.stroke()}drawFocusedValues(){let e=Math.round(this.xScaler.descale(this.xFocus)),r=$;this.context.font=It,this.context.textBaseline="bottom";for(let n of this.dataSets.values())if(e>=0&&e<n.values.length){let o=n.legend+" "+H(2,n.values[e]).toString();this.context.fillStyle=this.styleAtIndex(n,e),this.context.fillText(o,r,this.canvas.height-$),r+=this.context.measureText(o).width+$}}chartHeight(){return this.canvas.height-Rt}updateScalers(){this.dataSets.size!==0&&(this.xScaler=new F(new v(0,Math.max(...Array.from(this.dataSets.values(),e=>e.values.length))),new v(0,this.canvas.width)),this.yScaler=new F(v.merge(Array.from(this.dataSets.values(),e=>v.from(e.values))),new v(0,this.chartHeight())))}onMouseMove(e){let r=this.canvas.getBoundingClientRect();this.xFocus=e.clientX-r.left,this.draw()}onMouseOut(){this.xFocus=z,this.draw()}};function Jm(t){return t.toISOString().substring(0,10)}function Qm(t){let e=new Date;return e.setDate(e.getDate()-t),e}function Zm(t,e){let r=new Date(t);return r.setDate(r.getDate()+e),r}function ei(t){return(t.getMonth()+1).toString()+"/"+t.getDate().toString()}function mt(t,e,r,n){let o=s(i(i(r,e),i(t,r)),i(t,e)),m=x(o,n),a=new Array(m.length);for(let u=0;u<a.length;u++)a[u]=m[u],u>0&&(a[u]+=a[u-1]);return a}function Dt(t,e,r,n,o,m){let a=mt(r,n,o,m),u=i(f(t,a),f(e,a));return{ad:a,co:u}}function ui(t,e,r,n){return Dt(3,10,t,e,r,n)}var Ft=12,Mt=26,Pt=9;function Ct(t,e,r,n){let o=f(t,n),m=f(e,n),a=l(100,s(i(o,m),m)),u=f(r,a),p=i(a,u);return{ppo:a,signal:u,histogram:p}}function li(t){return Ct(Ft,Mt,Pt,t)}var Tt=12,Nt=26,kt=9;function Ut(t,e,r,n){let o=f(t,n),m=f(e,n),a=l(100,s(i(o,m),m)),u=f(r,a),p=i(a,u);return{pvo:a,signal:u,histogram:p}}function gi(t){return Ut(Tt,Nt,kt,t)}var Vt=20;function Gt(t,e,r,n){let o=T(e,r,n),m=b(t,o),a=b(t,B(i(o,m)));return s(i(o,m),l(.015,a))}function Ai(t,e,r){return Gt(Vt,t,e,r)}function Oi(t,e){let r=f(t,e),n=f(t,r);return i(l(2,r),n)}function Ii(t,e){let r=f(9,i(t,e)),n=f(9,r),o=s(r,n);return A(25,o)}function Pi(t,e,r){return b(t,i(r,e))}function ki(t,e){let r=f(t,e),n=f(t,r),o=f(t,n);return g(i(l(3,r),l(3,n)),o)}function Gi(t,e){let r=0,n=0;return t%2===0?(r=t/2,n=r+1):(r=(t+1)/2,n=r),b(r,b(n,e))}function Wi(t,e){let r=f(t,e),n=f(t,r),o=f(t,n),m=I(1,o[0],o);return s(i(o,m),m)}var J=20;function Q(t,e,r){return s(A(t,x(e,r)),A(t,r))}function Ki(t,e){return Q(J,t,e)}function it(t,e,r,n){d(e,r,n);let o=I(1,n[0],n);return k(i(e,r),B(i(e,o)),B(i(r,o)))}function G(t,e,r,n){let o=it(t,e,r,n),m=b(t,o);return{trLine:o,atrLine:m}}var Ht=90;function nu(t){let e=s(i(t.upperBand,t.lowerBand),t.middleBand),r=f(Ht,e);return{bandWidth:e,bandWidthEma90:r}}var Z=22;function su(t,e,r){let n=G(Z,t,e,r),o=l(3,n.atrLine),m=y(Z,t),a=S(Z,e),u=i(m,o),p=g(a,o);return{exitLong:u,exitShort:p}}function bu(t,e){let r=y(t,e),n=S(t,e),o=L(2,g(r,n));return{upperChannel:r,middleChannel:o,lowerChannel:n}}var _t=20;function Yt(t,e,r,n){let o=G(t,e,r,n),m=l(2,o.atrLine),a=f(t,n),u=g(a,m),p=i(a,m);return{middleLine:a,upperBand:u,lowerBand:p}}function yu(t,e,r){return Yt(_t,t,e,r)}var Wt=14;function jt(t,e){let r=y(t,e),n=l(100,s(i(e,r),r)),o=b(t,x(n,n));return re(o)}function Ou(t){return jt(Wt,t)}function Eu(t,e){d(t,e);let r=new Array(t.length);r[0]=0;for(let n=1;n<r.length;n++)r[n]=r[n-1],t[n]>t[n-1]?r[n]+=e[n]:t[n]<t[n-1]&&(r[n]-=e[n]);return r}function Fu(t,e){let r=I(1,t[0],t),n=x(e,s(i(t,r),r));return A(n.length,n)}function Pu(t){return{dates:new Array(t),openings:new Array(t),closings:new Array(t),highs:new Array(t),lows:new Array(t),volumes:new Array(t)}}function Cu(t,e){return{dates:[...t.dates,...e.dates],openings:[...t.openings,...e.openings],closings:[...t.closings,...e.closings],highs:[...t.highs,...e.highs],lows:[...t.lows,...e.lows],volumes:[...t.volumes,...e.volumes]}}function qt(t,e){let r=b(t,e.closings),n=Q(t,e.closings,e.volumes),o=new Array(n.length);for(let m=0;m<o.length;m++)n[m]>r[m]?o[m]=1:n[m]<r[m]?o[m]=-1:o[m]=0;return o}function Vu(t){return qt(J,t)}export{h as Action,P as BinarySearchTree,We as CMF_DEFAULT_PERIOD,Vt as CMI_PERIOD,ot as Chart,st as CompanyResultSortBy,J as DEFAULT_VWMA_PERIOD,bt as EMV_DEFAULT_PERIOD,_t as KC_PERIOD,Ze as NVI_DEFAULT_PERIOD,v as NumRange,F as NumScaler,Gm as STRATEGY_INFOS,wt as StrategyStatsSortBy,q as Trend,Wt as UI_DEFAULT_PERIOD,yt as VWAP_DEFAULT_PERIOD,B as abs,W as absolutePriceOscillator,tn as absolutePriceOscillatorStrategy,Ne as accelerationBands,ke as accelerationBandsStrategy,mt as accumulationDistribution,g as add,O as addBy,ne as applyActions,ye as aroon,Ae as aroonStrategy,G as atr,me as awesomeOscillator,ie as awesomeOscillatorStrategy,er as backtest,Se as balanceOfPower,Le as balanceOfPowerStrategy,Ge as bollingerBands,He as bollingerBandsStrategy,nu as bollingerBandsWidth,oe as buyAndHoldStrategy,je as chaikinMoneyFlow,qe as chaikinMoneyFlowStrategy,Dt as chaikinOscillator,Be as chandeForecastOscillator,ve as chandeForecastOscillatorStrategy,su as chandelierExit,M as changes,d as checkSameLength,Gt as communityChannelIndex,_m as computeStrategyStats,Cu as concatAssets,Y as customRsi,Qm as daysAgo,Zm as daysLaterFrom,de as defaultAbsolutePriceOscillator,xe as defaultAbsolutePriceOscillatorStrategy,ui as defaultChaikinOscillator,Ai as defaultCommunityChannelIndex,Xe as defaultEaseOfMovement,$e as defaultForceIndex,Ee as defaultKdj,yu as defaultKeltnerChannel,Je as defaultMoneyFlowIndex,li as defaultPercentagePriceOscillator,gi as defaultPercentageVolumeOscillator,_e as defaultProjectionOscillator,Ou as defaultUlcerIndex,rt as defaultVolumeWeightedAveragePrice,Ki as defaultVwma,Vu as defaultVwmaStrategy,Oi as dema,s as divide,L as divideBy,bu as donchianChannel,gt as easeOfMovement,Ke as easeOfMovementStrategy,f as ema,ee as extractSigns,dt as forceIndex,ze as forceIndexStrategy,N as generateNumbers,ue as ichimokuCloud,ae as ichimokuCloudStrategy,lt as kdj,Re as kdjStrategy,Yt as keltnerChannel,ct as leastSquare,we as linearRegressionUsingLeastSquare,Ie as macd,De as macdStrategy,Ii as massIndex,k as max,y as mmax,S as mmin,ht as moneyFlowIndex,Qe as moneyFlowIndexStrategy,Ln as movingChandeForecastOscillator,U as movingLeastSquare,Oe as movingLinearRegressionUsingLeastSquare,Ue as mstd,A as msum,x as multiply,l as multiplyBy,et as negativeVolumeIndex,tt as negativeVolumeIndexStrategy,Pu as newAssetWithLength,Eu as onBalanceVolume,Fe as parabolicSar,Me as parabolicSarStrategy,Ct as percentagePriceOscillator,Ut as percentageVolumeOscillator,te as pow,pt as projectionOscillator,Ye as projectionOscillatorStrategy,Pi as qstick,Jt as reverseActions,_ as rma,H as roundDigits,Kt as roundDigitsAll,Er as rsi,se as rsi2,ce as rsi2Strategy,I as shiftRightAndFillBy,D as shiftRightBy,j as since,b as sma,rr as sortCompanyResults,Ym as sortStrategyStats,re as sqrt,le as stochasticOscillator,fe as stochasticOscillatorStrategy,i as subtract,Xt as subtractBy,ki as tema,Jm as toISODateString,ei as toMonthAndDay,at as transpose,Gi as trima,Wi as trix,T as typicalPrice,Pe as typicalPriceStrategy,jt as ulcerIndex,Fu as volumePriceTrend,At as volumeWeightedAveragePrice,nt as volumeWeightedAveragePriceStrategy,Ce as vortex,Te as vortexStrategy,Q as vwma,be as williamsR,ge as williamsRStrategy,qt as wvmaStrategy};
//# sourceMappingURL=index.js.map
